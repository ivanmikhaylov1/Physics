# Моделирование столкновения тел

Этот проект моделирует столкновения тел - удара шара о стену и столкновения двух шаров - в различных физических моделях: абсолютно упругий, деформируемый по закону Гука и по закону Герца.
Реализована визуализация движения и взаимодействия объектов с отображением скоростей и ускорений.

---

## 1. Установка и использование

### Шаг 1. Клонировать проект

```bash
git clone https://github.com/username/project-name.git
```

### Шаг 2. Создать и активировать виртуальное окружение

**Windows PowerShell:**

```powershell
python -m venv venv
.\venv\Scripts\Activate
```

**Linux/macOS:**

```bash
python3 -m venv venv
source venv/bin/activate
```

### Шаг 3. Установить зависимости

```bash
pip install -r requirements.txt
```

### Шаг 4. Настроить параметры моделирования

Параметры задаются в файле `params.txt`, например:

```
model: s
def: 1
speed: 10
angle: 0
speed2: 0
angle2: 180
radius: 1.0
radius2: 1.0
mass: 1.0
mass2: 1.0
duration: 5
k: 1000
x0: 0
y0: 0
x0_2: 5
y0_2: 0
```

где:

* `model` - тип модели: `w` (стена) или `s` (два шара),
* `def` - тип взаимодействия:
  `0` - абсолютно упругий удар,
  `1` - деформация по закону Гука (*F = k·Δx*),
  `2` - деформация по закону Герца (*F = k·Δx^(3/2)*).
* `speed` и `speed2` - скорости шаров 
* `angle` и `angle2` - направление скоростей
* `radius` и `radius2` - радиусы шаров
* `mass` и `mass2` - массы шаров
* `x0` `y0` - позиция первого шара
* `x0_2` `y0_2` - позиция второго шара
* `duration` - время симуляции
* `k` - коэффициент жёсткости удара

### Шаг 5. Запустить симуляцию

После запуска откроется окно анимации, где отображаются траектории шаров, стрелки скоростей (красные) и ускорений (зелёные).

### Шаг 6. Запустить тесты

В папке tests находятся 2 теста для 2 случаев:
1. Столкновение одного шара со стенкой
2. Столкновение 2 шаров

Каждый из этих случаев рассматривает все 3 вида деформации шаров

Тесты запускаются из корня проекта (папки Physics), либо в ide

Первый тест: `python -m M2.tests.test1`
Второй тест: `python -m M2.tests.test2`

После запуска тестов появится 3 окна: 
- первое - визуализация абсолютно упругого столкновения
- второе - визуализация с силой упругости по закону Гука
- третье - по закону Герца

и в консоли выведется сравнение с аналитическим решением

---

## 2. Теория

### 2.1. Законы сохранения при абсолютно упругом ударе

При абсолютно упругом столкновении сохраняются:

* **Импульс системы:**
  $m_1 \vec{v}_1 + m_2 \vec{v}_2 = \text{const}$
* **Кинетическая энергия:**
  $\frac{1}{2} m_1 v_1^2 + \frac{1}{2} m_2 v_2^2 = \text{const}$

Из этих законов выводятся аналитические выражения для скоростей после удара, которые реализованы в программе при `def = 0`.

---

### 2.2. Моделирование деформируемого удара

Для моделирования контакта тел при деформации используется второй закон Ньютона:
$m \frac{d^2x}{dt^2} = F(x)$

Сила упругости моделируется по двум законам:

* **Закон Гука:** ( $F = k \cdot \Delta x$ )
* **Закон Герца:** ( $F = k \cdot \Delta x^{3/2}$ )

Дифференциальное уравнение решается **численно (методом Эйлера)**:
* $v_{t+\Delta t} = v_t + a_t \cdot \Delta t,\quad $
* $x_{t+\Delta t} = x_t + v_{t+\Delta t} \cdot \Delta t$

Таким образом, программа моделирует процесс деформации и восстановления формы шаров при ударе.

---

## 3. Ограничения входных данных

Во избежание некорректных вычислений и анимации введена система валидации параметров (см. `validate_params()`):

* `speed`, `speed2` - 0 ≤ v ≤ 31 [м/с] - максимально зафиксированная скорость шара при игре в бильярд
* `angle`, `angle2` - 0° ≤ θ < 360° - физически допустимые направления движения
* `radius`, `radius2` - 0 < r ≤ 100 [м] - ограничение размеров шаров для корректной визуализации
* `mass`, `mass2` - 1 ≤ m ≤ 10000 [кг] - физически реалистичный диапазон
* `duration` - 0 < t ≤ 10 [с] - чтобы симуляция не шла слишком долго
* `k` - 0 < k ≤ 10000 [Н/м] - для предотвращения численных ошибок при жёстких контактах
* Начальные координаты [м] - шары не должны пересекаться

Если параметры выходят за пределы допустимого диапазона, программа выдаёт ошибку с пояснением.

---
